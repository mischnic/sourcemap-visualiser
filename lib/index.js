var _color=$parcel$interopDefault(require("color")),_niceColorPalettes=$parcel$interopDefault(require("nice-color-palettes/1000")),_classnames=$parcel$interopDefault(require("classnames")),_path=$parcel$interopDefault(require("path")),decode=require("sourcemap-codec").decode,_preactCompat=$parcel$interopDefault(require("preact/compat"));function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}function $c2699ffe1da9478052cc3481e59059e$var$_createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,r){if(!e)return;if("string"==typeof e)return $c2699ffe1da9478052cc3481e59059e$var$_arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $c2699ffe1da9478052cc3481e59059e$var$_arrayLikeToArray(e,r)}(e))){var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw n}}}}function $c2699ffe1da9478052cc3481e59059e$var$_arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function $df22d457158df068f6fc346cda67$export$default(e){var r=e.sources,t=e.selectedSource,a=e.onSelect;return _preactCompat.createElement("div",{className:"h-full bg-gray-800 overflow-y-auto"},_preactCompat.createElement("div",{className:"font-medium text-white p-2 bg-gray-600"},"Sources"),_preactCompat.createElement("div",{className:"overflow-y-auto"},r.map((function(e,r){var n=_path.basename(_path.dirname(e.name))+"/"+_path.basename(e.name);return _preactCompat.createElement("div",{className:_classnames("whitespace-no-wrap text-white px-2 py-1 hover:bg-gray-500 cursor-pointer",{"bg-gray-700":t===r}),onClick:function(){a(r)},key:r},n)}))))}function $ef1bf9db4477e3613976db8da8a33$export$default(e){var r=e.mappings,t=e.hoveredMapping,a=e.onHoverMapping,n=e.selectedMapping,o=e.onSelectMapping;return _preactCompat.createElement("div",{className:"h-full bg-gray-100 overflow-y-auto"},_preactCompat.createElement("div",{className:"font-medium text-gray-700 p-2"},"Mappings"),_preactCompat.createElement("div",null,r.map((function(e,r){return _preactCompat.createElement("div",{className:_classnames("px-2 font-medium text-gray-700 whitespace-no-wrap cursor-pointer",{underline:t===r,"bg-blue-200":n===r}),key:r,onMouseEnter:function(){return a(r)},onMouseLeave:function(){return a(-1)},onClick:function(){return o(r)}},_preactCompat.createElement("span",null,e.originalLine,":",e.originalColumn),_preactCompat.createElement("span",{className:"mx-1"},"-"),_preactCompat.createElement("span",null,e.generatedLine,":",e.generatedColumn),e.name&&_preactCompat.createElement("span",{className:"font-normal text-gray-600 ml-2"},"(",e.name,")"))}))))}function $f9214768e60851ecdfcc2a27$var$_createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,r){if(!e)return;if("string"==typeof e)return $f9214768e60851ecdfcc2a27$var$_arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $f9214768e60851ecdfcc2a27$var$_arrayLikeToArray(e,r)}(e))){var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw n}}}}function $f9214768e60851ecdfcc2a27$var$_arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function $f9214768e60851ecdfcc2a27$export$default(e){var r=e.source,t=e.mappings,a=e.hoveredMapping,n=e.onHoverMapping,o=e.selectedMapping,c=e.onSelectMapping,l=e.generated,i=_preactCompat.useMemo((function(){var e,a=[[]],n=0,o={value:"",mapping:null,mappingIndex:-1},c=0,l=$f9214768e60851ecdfcc2a27$var$_createForOfIteratorHelper(r.content);try{for(l.s();!(e=l.n()).done;){var i=e.value,p=a.length-1;if("\n"!==i){var u=t[c];for(u.originalLine===p&&u.originalColumn===n&&(o.value&&a[p].push(o),o={value:"",mapping:u,mappingIndex:c});c<t.length-1&&(u.originalLine<p||u.originalLine===p&&u.originalColumn<n||u.originalLine===p&&u.originalColumn===n);)c++,u=t[c];o.value+=i,n++}else o.value&&(a[p].push(o),o={value:"",mapping:null,mappingIndex:-1}),a.push([]),n=0}}catch(e){l.e(e)}finally{l.f()}return a}),[r.name]),p=_preactCompat.useMemo((function(){if(o<0)return null;var e=t[o],r=t[o+1];r&&r.generatedLine!==e.generatedLine&&(r=null);var a,n=["","",""],c=0,i=$f9214768e60851ecdfcc2a27$var$_createForOfIteratorHelper(l.split("\n")[e.generatedLine]);try{for(i.s();!(a=i.n()).done;){var p=a.value;c<e.generatedColumn?n[0]+=p:r&&c>r.generatedColumn?n[2]+=p:n[1]+=p,c++}}catch(e){i.e(e)}finally{i.f()}return{line:e.originalLine,parts:[n[0].slice(-20),n[1],n[2].slice(0,20)]}}),[o]),u=r.content.split("\n").length.toString(10).length+1,m=0;return _preactCompat.createElement("div",{className:"w-full h-full flex flex-col font-mono text-sm"},i.map((function(e,r){return _preactCompat.createElement(_preactCompat.Fragment,{key:"line-".concat(r)},_preactCompat.createElement("div",{className:"flex flex-row"},_preactCompat.createElement("div",{className:"text-right px-2 bg-gray-200",style:{width:"".concat(u,"rem")}},r),_preactCompat.createElement("div",{className:"px-4 whitespace-pre"},e.map((function(e,t){var l={};return e.mapping&&(l.backgroundColor=_niceColorPalettes[m%5e3][m%5],l.color=function(e){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");return.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16)>186?"#000000":"#FFFFFF"}(l.backgroundColor),e.mappingIndex>-1&&(o===e.mappingIndex?(l.backgroundColor="#000000",l.color="#ffffff"):a===e.mappingIndex&&(l.backgroundColor=_color(l.backgroundColor).darken(.25))),m++),_preactCompat.createElement("span",{key:"line-".concat(r,"-mapping-").concat(t),className:_classnames("rounded",{"cursor-pointer":!!e.mapping,"text-gray-600":!e.mapping}),style:l,onMouseEnter:function(){e.mappingIndex>-1&&n(e.mappingIndex)},onMouseLeave:function(){return n(-1)},onClick:function(){e.mappingIndex>-1&&c(e.mappingIndex)}},e.value)})))),p&&p.line===r&&_preactCompat.createElement("div",{className:"p-2"},_preactCompat.createElement("span",{className:"text-gray-500"},p.parts[0]),_preactCompat.createElement("span",{className:"bg-black text-white"},p.parts[1]||"[NOT FOUND]"),_preactCompat.createElement("span",{className:"text-gray-500"},p.parts[2])))})),_preactCompat.createElement("div",{className:"flex flex-row h-full"},_preactCompat.createElement("div",{className:"flex px-2 bg-gray-200",style:{width:"".concat(u,"rem")}}),_preactCompat.createElement("div",null)))}function $ec73d0ab9d68b6dd64b4cd87d2e$var$_slicedToArray(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(t.push(c.value),!r||t.length!==r);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return $ec73d0ab9d68b6dd64b4cd87d2e$var$_arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $ec73d0ab9d68b6dd64b4cd87d2e$var$_arrayLikeToArray(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $ec73d0ab9d68b6dd64b4cd87d2e$var$_arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function $ec73d0ab9d68b6dd64b4cd87d2e$export$default(e){var r=e.sourcemap,t=$ec73d0ab9d68b6dd64b4cd87d2e$var$_slicedToArray(_preactCompat.useState(0),2),a=t[0],n=t[1],o=$ec73d0ab9d68b6dd64b4cd87d2e$var$_slicedToArray(_preactCompat.useState(-1),2),c=o[0],l=o[1],i=$ec73d0ab9d68b6dd64b4cd87d2e$var$_slicedToArray(_preactCompat.useState(-1),2),p=i[0],u=i[1],m=_preactCompat.useMemo((function(){return function(e,r){var t,a=0,n=[],o=$c2699ffe1da9478052cc3481e59059e$var$_createForOfIteratorHelper(decode(e));try{for(o.s();!(t=o.n()).done;){var c,l=$c2699ffe1da9478052cc3481e59059e$var$_createForOfIteratorHelper(t.value);try{for(l.s();!(c=l.n()).done;){var i=c.value,p=i.length>1,u=i.length>4;n.push({generatedLine:a,generatedColumn:i[0],originalLine:p?i[2]:-1,originalColumn:p?i[3]:-1,sourceIndex:p?i[1]:-1,name:u?r[i[4]]:null})}}catch(e){l.e(e)}finally{l.f()}a++}}catch(e){o.e(e)}finally{o.f()}return n}(r.mappings,r.names)}),[r.mappings]),f=_preactCompat.useMemo((function(){return m.filter((function(e){return e.sourceIndex===a})).sort((function(e,r){return(null!=e.originalLine?1e4*e.originalLine+e.originalColumn:Number.MAX_VALUE)-(null!=r.originalLine?1e4*r.originalLine+r.originalColumn:Number.MAX_VALUE)}))}),[a]),d=r.sources[a];return _preactCompat.createElement("div",{className:"h-full min-h-0 flex"},_preactCompat.createElement("div",{className:"w-1/6"},_preactCompat.createElement($df22d457158df068f6fc346cda67$export$default,{selectedSource:a,onSelect:function(e){u(-1),l(-1),n(e)},sources:r.sources})),_preactCompat.createElement("div",{className:"w-4/6 overflow-y-auto"},d.content?_preactCompat.createElement($f9214768e60851ecdfcc2a27$export$default,{source:d,mappings:f,hoveredMapping:c,onHoverMapping:l,selectedMapping:p,onSelectMapping:u,generated:r.content}):_preactCompat.createElement("div",{className:"p-2"},"No source content found for ",d.name)),_preactCompat.createElement("div",{className:"w-1/6"},_preactCompat.createElement($ef1bf9db4477e3613976db8da8a33$export$default,{mappings:f,hoveredMapping:c,onHoverMapping:l,selectedMapping:p,onSelectMapping:u})))}function $a88454a442db4834c487b51f62dec6cb$var$_slicedToArray(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],a=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(t.push(c.value),!r||t.length!==r);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return $a88454a442db4834c487b51f62dec6cb$var$_arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $a88454a442db4834c487b51f62dec6cb$var$_arrayLikeToArray(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a88454a442db4834c487b51f62dec6cb$var$_arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}exports.default=function(e){var r=e.sourcemapContent,t=$a88454a442db4834c487b51f62dec6cb$var$_slicedToArray(_preactCompat.useState(0),2),a=t[0],n=t[1];if(r.length>0){var o=r[a];return _preactCompat.createElement("div",{id:"sourcemap-visualizer",className:"font-sans leading-normal h-full flex flex-col"},_preactCompat.createElement("div",{className:"bg-gray-700 p-2 flex"},_preactCompat.createElement("div",{className:"text-white mr-4"},"Select Bundle"),_preactCompat.createElement("select",{className:"border-none",onChange:function(e){n(parseInt(e.target.value,10))}},r.map((function(e,r){return _preactCompat.createElement("option",{value:r,key:e.name},e.name)})))),_preactCompat.createElement($ec73d0ab9d68b6dd64b4cd87d2e$export$default,{sourcemap:o}))}};
//# sourceMappingURL=index.js.map
